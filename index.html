<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Hospital Management System</title>
<style>
:root{
  --bg:#f4f6fb;--panel:#ffffff;--primary:#0d9488;--secondary:#0369a1;
  --text:#0f172a;--muted:#64748b;--border:#e2e8f0;--accent:#14b8a6
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial,sans-serif}
html,body{height:100%}
body{display:flex;flex-direction:column;min-height:100vh;background:var(--bg);color:var(--text)}
header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#fff;border-bottom:1px solid var(--border);box-shadow:0 2px 8px rgba(0,0,0,.05)}
header h1{font-size:22px;color:var(--primary)}
.actions{display:flex;gap:12px}
button{padding:10px 16px;border-radius:12px;border:none;font-weight:600;cursor:pointer}
.btn-primary{background:linear-gradient(90deg,var(--secondary),var(--primary));color:#fff}
.btn-outline{background:#fff;border:1px solid #cbd5e1}
nav{display:flex;gap:24px;padding:12px 24px;background:#fff;border-bottom:1px solid var(--border)}
nav a{text-decoration:none;color:var(--text);font-weight:600;cursor:pointer}
nav a.active{color:var(--primary)}
.card.full {
  width:100%;
  background:var(--panel);
  padding:28px 0;
  border-radius:0;
  box-shadow:none;
}
.inner {
  max-width:1600px;
  margin:0 auto;
  padding:0 24px;
}
.card-inner {
  background:transparent;
  border-radius:18px;
  padding:0;
}
.panel {
  background:var(--panel);
  border-radius:14px;
  padding:20px;
  box-shadow:0 8px 20px rgba(0,0,0,.04);
  margin-bottom:18px;
}
.search{margin-bottom:14px;padding:12px;border-radius:12px;border:1px solid var(--border);width:100%}
input,select,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #cbd5e1;margin-top:8px}
input:focus,select:focus,textarea:focus{border-color:var(--accent);outline:none;box-shadow:0 0 0 3px rgba(20,184,166,.12)}
textarea{resize:vertical}
.list{max-height:600px;overflow:auto;border:1px solid var(--border);border-radius:14px;padding:8px;background:#fafafa}
.patient-item{padding:16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;background:#fff;border-radius:10px;margin-bottom:8px}
.patient-meta{font-size:13px;color:var(--muted);margin-top:4px}
.row-actions button{margin-left:6px}
.table{width:100%;border-collapse:collapse;font-size:14px}
.table th,.table td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:1000}
.modal-content{background:#fff;border-radius:18px;padding:28px;width:640px;max-width:95vw;max-height:90vh;overflow:auto}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-grid .full{grid-column:1/-1}
.metric-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:18px;margin-bottom:20px}
.metric{background:#f0fdf4;border-left:6px solid var(--accent);padding:14px;border-radius:12px}
.metric span{display:block;font-size:22px;font-weight:700;color:var(--primary)}
.hidden{display:none}
footer{margin-top:auto;background:#fff;text-align:center;padding:16px;color:#64748b;border-top:1px solid var(--border);font-weight:600}
@media (max-width:800px){
  .form-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div id="authOverlay" style="position:fixed;inset:0;background:#f4f6fb;display:flex;align-items:center;justify-content:center;z-index:3000">
  <div style="background:#fff;padding:32px;border-radius:18px;width:360px;box-shadow:0 20px 40px rgba(0,0,0,.2)">
    <h2 style="margin-bottom:12px">Hospital Login</h2>
    <input id="authUser" placeholder="Username">
    <input id="authPass" type="password" placeholder="Password" style="margin-top:10px">
    <button class="btn-primary" style="width:100%;margin-top:16px" onclick="login()">Login</button>
    <p id="authError" style="color:red;margin-top:10px"></p>
  </div>
</div>

<header>
  <h1>Hospital Management System</h1>
  <div class="actions">
    <button class="btn-outline" onclick="openPatientForm()">+ New Patient</button>
    <button class="btn-primary" onclick="openAppointmentForm()">Book Appointment</button>
    <button class="btn-outline" onclick="logout()">Logout</button>
  </div>
</header>

<nav>
  <a class="active" onclick="switchSection('overview')">Overview</a>
  <a onclick="switchSection('patients')">Patients</a>
  <a onclick="switchSection('appointments')">Appointments</a>
  <a onclick="switchSection('doctors')">Doctors</a>
</nav>

<section id="overviewSection" class="card full">
  <div class="inner">
    <div class="panel">
      <div class="metric-grid">
        <div class="metric"><div>Total Patients</div><span id="mPatients">0</span></div>
        <div class="metric"><div>Total Appointments</div><span id="mAppointments">0</span></div>
        <div class="metric"><div>Doctors</div><span id="mDoctors">0</span></div>
      </div>
      <h3 style="margin-top:6px;">Recent Patients</h3>
      <input class="search" id="searchInput" placeholder="Search by name, phone, or ID" oninput="renderPatients('overview')" />
      <div class="list" id="patientList"></div>
    </div>
  </div>
</section>

<section id="patientsSection" class="card full hidden">
  <div class="inner">
    <div class="panel">
      <h3>Patients</h3>
      <input class="search" id="searchInputPatients" placeholder="Search by name, phone, or ID" oninput="renderPatients('patients')" />
      <div class="list" id="patientListPatients"></div>
    </div>
  </div>
</section>

<section id="appointmentsSection" class="card full hidden">
  <div class="inner">
    <div class="panel">
      <h3>Appointments</h3>
      <table class="table">
        <thead><tr><th>Patient</th><th>Doctor</th><th>Date</th><th></th></tr></thead>
        <tbody id="appointmentTable"></tbody>
      </table>
    </div>
  </div>
</section>

<section id="doctorsSection" class="card full hidden">
  <div class="inner">
    <div class="panel">
      <h3>Doctors</h3>

      <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px;">
        <input id="newDoctorName" placeholder="New doctor name (e.g. Dr. John Doe)" />
        <button class="btn-primary" onclick="addDoctor()">Add Doctor</button>
      </div>

      <div class="list" id="doctorsList"></div>
      <small style="color:var(--muted);display:block;margin-top:8px;">Deleting a doctor will also remove appointments assigned to them.</small>
    </div>
  </div>
</section>

<div class="modal" id="patientModal">
  <div class="modal-content">
    <h3 id="pmTitle">New Patient</h3>
    <div class="form-grid">
      <input class="full" id="pName" placeholder="Full Name" />
      <input id="pPhone" placeholder="Phone Number" />
      <select id="pGender"><option value="">Gender</option><option>Male</option><option>Female</option></select>
      <select id="pBlood">
        <option value="">Blood Group</option>
        <option>A+</option><option>A-</option><option>B+</option><option>B-</option>
        <option>AB+</option><option>AB-</option><option>O+</option><option>O-</option>
      </select>
      <input id="pAge" type="number" placeholder="Age" />
      <input id="pHeight" type="number" placeholder="Height (cm)" />
      <input id="pWeight" type="number" placeholder="Weight (kg)" />
      <textarea class="full" id="pNote" placeholder="Doctor Notes"></textarea>
    </div>
    <div style="margin-top:16px;display:flex;gap:12px">
      <button class="btn-primary" onclick="savePatient()">Save</button>
      <button class="btn-outline" onclick="closeModal()">Cancel</button>
    </div>
  </div>
</div>

<div class="modal" id="appointmentModal">
  <div class="modal-content">
    <h3>Book Appointment</h3>
    <select id="aPatient"></select>
    <select id="aDoctor"></select>
    <input id="aDate" type="datetime-local" />
    <div style="margin-top:16px;display:flex;gap:12px">
      <button class="btn-primary" onclick="saveAppointment()">Book</button>
      <button class="btn-outline" onclick="closeModal()">Cancel</button>
    </div>
  </div>
</div>

<footer>© Lagos Group 2026</footer>

<script>
const AUTH_KEY = 'hms_auth'
if (!localStorage.getItem('hms_user')) {
  localStorage.setItem('hms_user', JSON.stringify({ username: 'admin', password: 'admin123' }))
}
function login(){
  const u = document.getElementById('authUser').value.trim()
  const p = document.getElementById('authPass').value.trim()
  const s = JSON.parse(localStorage.getItem('hms_user'))
  if (u === s.username && p === s.password) {
    localStorage.setItem(AUTH_KEY, 'true')
    document.getElementById('authOverlay').style.display = 'none'
  } else {
    document.getElementById('authError').textContent = 'Invalid login details'
  }
}
function logout(){
  localStorage.removeItem(AUTH_KEY)
  location.reload()
}
if (localStorage.getItem(AUTH_KEY) === 'true') {
  document.getElementById('authOverlay').style.display = 'none'
}
const db = {
  patients: JSON.parse(localStorage.getItem('patients')||'[]'),
  appointments: JSON.parse(localStorage.getItem('appointments')||'[]'),
  doctors: JSON.parse(localStorage.getItem('doctors')||'null')
}
if (!db.doctors || !Array.isArray(db.doctors)) {
  db.doctors = [
    { id: Math.floor(100000+Math.random()*900000), name: 'Dr. Adeyemi' },
    { id: Math.floor(100000+Math.random()*900000), name: 'Dr. Okafor' },
    { id: Math.floor(100000+Math.random()*900000), name: 'Dr. Balogun' },
    { id: Math.floor(100000+Math.random()*900000), name: 'Dr. Musa' }
  ]
  localStorage.setItem('doctors', JSON.stringify(db.doctors))
}
let editingPatient = null
function persist(){
  localStorage.setItem('patients', JSON.stringify(db.patients))
  localStorage.setItem('appointments', JSON.stringify(db.appointments))
  localStorage.setItem('doctors', JSON.stringify(db.doctors))
}
function genId(){ return Math.floor(100000+Math.random()*900000) }
function switchSection(section){
  document.querySelectorAll('.card.full').forEach(c=>c.classList.add('hidden'))
  document.getElementById(section+'Section').classList.remove('hidden')
  document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'))
  document.querySelector(`nav a[onclick*="${section}"]`).classList.add('active')
  if(section==='overview' || section==='patients') renderPatients(section)
  if(section==='appointments') renderAppointments()
  if(section==='doctors') renderDoctors()
}
function openPatientForm(p){
  editingPatient = p || null
  document.getElementById('pmTitle').textContent = p ? 'Edit Patient' : 'New Patient'
  document.getElementById('pName').value = p?.name || ''
  document.getElementById('pPhone').value = p?.phone || ''
  document.getElementById('pGender').value = p?.gender || ''
  document.getElementById('pBlood').value = p?.blood || ''
  document.getElementById('pAge').value = p?.age || ''
  document.getElementById('pHeight').value = p?.height || ''
  document.getElementById('pWeight').value = p?.weight || ''
  document.getElementById('pNote').value = p?.note || ''
  document.getElementById('patientModal').style.display = 'flex'
}
function openAppointmentForm(){ renderPatientOptions(); renderDoctorOptions(); document.getElementById('appointmentModal').style.display='flex' }
function closeModal(){ document.getElementById('patientModal').style.display = document.getElementById('appointmentModal').style.display = 'none' }
function savePatient(){
  if(!document.getElementById('pName').value.trim()){ alert('Enter patient name'); return }
  if(!document.getElementById('pPhone').value.trim()){ alert('Enter phone number'); return }
  if(!document.getElementById('pGender').value){ alert('Select gender'); return }
  if(!document.getElementById('pBlood').value){ alert('Select blood group'); return }
  if(editingPatient){
    Object.assign(editingPatient, {
      name:document.getElementById('pName').value, phone:document.getElementById('pPhone').value, gender:document.getElementById('pGender').value,
      blood:document.getElementById('pBlood').value, age:document.getElementById('pAge').value, height:document.getElementById('pHeight').value,
      weight:document.getElementById('pWeight').value, note:document.getElementById('pNote').value
    })
  } else {
    db.patients.push({
      id: genId(), name:document.getElementById('pName').value, phone:document.getElementById('pPhone').value, gender:document.getElementById('pGender').value,
      blood:document.getElementById('pBlood').value, age:document.getElementById('pAge').value, height:document.getElementById('pHeight').value,
      weight:document.getElementById('pWeight').value, note:document.getElementById('pNote').value
    })
  }
  persist(); closeModal(); renderPatients('overview'); renderPatientOptions()
}
function deletePatient(id){
  if(!confirm('Are you sure you want to delete this patient?')) return
  db.patients = db.patients.filter(p=>p.id!==id)
  db.appointments = db.appointments.filter(a=>a.patientId!==id)
  persist(); renderPatients('overview'); renderAppointments()
}
function renderPatients(section='overview'){
  const q = (section==='overview' ? (document.getElementById('searchInput')?.value||'') : (document.getElementById('searchInputPatients')?.value||'')).toLowerCase()
  const list = section==='overview' ? document.getElementById('patientList') : document.getElementById('patientListPatients')
  if(!list) return
  list.innerHTML = ''
  db.patients.filter(p=>`${p.name}${p.phone}${p.id}`.toLowerCase().includes(q))
    .forEach(p=>{
      list.innerHTML += `<div class='patient-item'>
        <div onclick='openPatientForm(db.patients.find(x=>x.id==${p.id}))' style="cursor:pointer">
          <strong>${p.name}</strong>
          <div class='patient-meta'>ID: ${p.id} • ${p.gender||'-'} • ${p.blood||'-'} • ${p.phone}</div>
        </div>
        <div class='row-actions'>
          <button onclick='event.stopPropagation();openPatientForm(db.patients.find(x=>x.id==${p.id}))'>Edit</button>
          <button onclick='event.stopPropagation();deletePatient(${p.id})'>Delete</button>
        </div>
      </div>`
    })
  document.getElementById('mPatients').textContent = db.patients.length
}
function renderDoctors(){
  const container = document.getElementById('doctorsList'); if(!container) return
  container.innerHTML = ''
  db.doctors.forEach(d=>{
    container.innerHTML += `<div style="display:flex;justify-content:space-between;align-items:center;background:#fff;padding:12px;border-radius:10px;margin-bottom:8px">
      <div>${d.name}</div>
      <div><button onclick="deleteDoctor(${d.id})" style="background:#fff;border:1px solid #f1a1a1;padding:8px;border-radius:8px;cursor:pointer">Delete</button></div>
    </div>`
  })
  document.getElementById('mDoctors').textContent = db.doctors.length
  renderDoctorOptions()
}
function addDoctor(){
  const name = (document.getElementById('newDoctorName').value || '').trim()
  if(!name){ alert('Enter doctor name'); return }
  const id = genId()
  db.doctors.push({id, name})
  document.getElementById('newDoctorName').value = ''
  persist(); renderDoctors()
}
function deleteDoctor(id){
  const doc = db.doctors.find(d=>d.id===id)
  if(!doc) return
  if(!confirm(`Delete ${doc.name}? This will also remove any appointments assigned to them.`)) return
  db.doctors = db.doctors.filter(d=>d.id!==id)
  db.appointments = db.appointments.filter(a=>a.doctor !== doc.name)
  persist(); renderDoctors(); renderAppointments()
}
function renderDoctorOptions(){
  const sel = document.getElementById('aDoctor'); if(!sel) return
  sel.innerHTML = ''
  db.doctors.forEach(d => sel.innerHTML += `<option value="${escapeHtml(d.name)}">${d.name}</option>`)
}
function renderPatientOptions(){
  const sel = document.getElementById('aPatient'); if(!sel) return
  sel.innerHTML = '<option value="">Select Patient</option>'
  db.patients.forEach(p=> sel.innerHTML += `<option value='${p.id}'>${escapeHtml(p.name)} (${p.id})</option>`)
}
function saveAppointment(){
  if(!document.getElementById('aPatient').value){ alert('Select a patient'); return }
  if(!document.getElementById('aDate').value){ alert('Select date'); return }
  if(!document.getElementById('aDoctor').value){ alert('Select doctor'); return }
  db.appointments.push({ id: Date.now(), patientId: +document.getElementById('aPatient').value, doctor: document.getElementById('aDoctor').value, date: document.getElementById('aDate').value })
  persist(); closeModal(); renderAppointments()
}
function deleteAppointment(id){
  if(!confirm('Are you sure you want to delete this appointment?')) return
  db.appointments = db.appointments.filter(a=>a.id!==id)
  persist(); renderAppointments()
}
function renderAppointments(){
  const t = document.getElementById('appointmentTable'); if(!t) return
  t.innerHTML = ''
  db.appointments.forEach(a=>{
    const p = db.patients.find(x=>x.id==a.patientId)
    t.innerHTML += `<tr>
      <td>${escapeHtml(p?.name||'')}</td>
      <td>${escapeHtml(a.doctor)}</td>
      <td>${new Date(a.date).toLocaleString()}</td>
      <td><button onclick='deleteAppointment(${a.id})'>Delete</button></td>
    </tr>`
  })
  document.getElementById('mAppointments').textContent = db.appointments.length
}
function escapeHtml(str){
  return String(str).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;')
}
switchSection('overview')
renderPatients('overview'); renderAppointments(); renderPatientOptions(); renderDoctorOptions(); renderDoctors();
</script>
</body>
</html>

